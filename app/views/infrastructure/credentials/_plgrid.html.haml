- credentials = GridCredentials.find_by_user_id(@current_user.id)

%row#plgrid-credentials-panel
  = form_tag add_infrastructure_credentials_infrastructure_path, remote: true, class: 'custom' do
    = hidden_field_tag 'infrastructure_type', 'plgrid'

    %h5.subheader= t('.credentials_label')

    .row
      .small-4.columns
        = label_tag :host, t('.credentials.host') + ':', class: 'inline right'
      .small-4.columns
        = text_field_tag :host, credentials.nil? ? '' : credentials.host
      .small-4.columns
    .row
      .small-4.columns
        = label_tag :username, t('.credentials.login') + ':', class: 'inline right'
      .small-4.columns
        = text_field_tag :username, credentials.nil? ? '' : credentials.login
      .small-4.columns
    .row
      .small-4.columns
        = label_tag :password, t('.credentials.password') + ':', class: 'inline right'
      .small-4.columns
        = password_field_tag :password, credentials.nil? ? '' : credentials.password
      .small-4.columns
    .row
      .small-12.columns.text-center
        = submit_tag t('infrastructure.information.submit'), class: 'button radius'
        = image_tag 'loading.gif', class: 'plgrid-busy', style: 'display: none;'

.row#amazon-remove-panel
  .small-12.columns.text-center
    = image_tag 'loading.gif', class: 'plgrid-busy', style: 'display: none;'


= content_for :javascript do
  :javascript
    $(function() {
      new window.CredentialsDialog('plgrid-credentials-panel',
                                   'plgrid-remove-panel',
                                   '.plgrid-busy');
    });
