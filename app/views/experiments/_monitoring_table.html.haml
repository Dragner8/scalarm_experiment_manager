%article{id: 'progress_information', style: 'overflow:auto;'}
  %h4.subheader= t('.header')

  %ul.inline-list
    %li
      %span.button.small.radius.loadRunningSimulationsTable= t('.show_running')
    %li
      %span.button.small.radius.loadCompletedSimulationsTable= t('.show_completed')


  #running_simulations_table_wrapper{style: 'display: none;'}
  #completed_simulations_table_wrapper{style: 'display: none;'}

= content_for :javascript do
  :javascript
    $(function() {
      $('.loadRunningSimulationsTable').on('click', function() {
        var $simTable = $('#running_simulations_table_wrapper');

        $simTable.slideToggle();
        var targetOffset = $(this).offset().top;
        $('html,body').animate({scrollTop: targetOffset}, 1000);

        $simTable.load("#{running_simulations_table_experiment_path(@experiment._id)}", function() {

          $('#running_simulations_table').on('click', 'tr', function() {
            $('#extension-dialog').html(window.loaderHTML);

            var simId = $(this).find("td.index").text();
            $('#extension-dialog').load("/experiments/" + "#{@experiment._id}" + "/simulations/" + simId);
            $('#extension-dialog').foundation('reveal', 'open');
          });
        });
      });

      $('.loadCompletedSimulationsTable').on('click', function() {
        var $simTable = $('#completed_simulations_table_wrapper');

        $simTable.slideToggle();
        var targetOffset = $(this).offset().top;
        $('html,body').animate({scrollTop: targetOffset}, 1000);

        $simTable.load("#{completed_simulations_table_experiment_path(@experiment._id)}", function() {
          $('#completed_simulations_table').on('click', 'tr', function() {
            $('#extension-dialog').html(window.loaderHTML);

            var simId = $(this).find("td.index").text();
            $('#extension-dialog').load("/experiments/" + "#{@experiment._id}" + "/simulations/" + simId);
            $('#extension-dialog').foundation('reveal', 'open');
          });
        });
      });
    });
