= javascript_include_tag 'jquery.dataTables.js'
= stylesheet_link_tag '/css/jquery.dataTables.css'

%article{id: 'progress_information', style: 'margin-bottom: 15px; display: none; overflow:auto;'}
  %h3 Progress information
  %table#monitoring_table{style: 'max-width: 200px;'}
    %thead
      %th #
      %th Started at
      %th Intermediate results
      - @data_farming_experiment.range_arguments.each do |parameter_uid|
        %th= @data_farming_experiment.input_parameter_label_for(parameter_uid)

:javascript
  $(function() {
    oTable = $('#monitoring_table').dataTable({
      'bFilter': false,
      'bPaginate': false,
      'bSort': true,
      'bProcessing': true,
      'sAjaxSource': "#{intermediate_results_experiment_path(@experiment.id)}",
      'bStateSave': true
    });

    setInterval(function() {
      if($('#monitoring_table').is(":visible")) {
        oTable.fnReloadAjax();
      }
    }, 30000);
  });