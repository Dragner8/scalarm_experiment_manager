.content
  #workers_info.row
    #state.small-3.columns
    #value.small-1.columns

    - if @experiment.is_running
      .small-8.columns
        .row
          .small-8.columns.small-centered
            %span#boostButton.success{class: button_classes}
              %i.fi-plus
              = t('experiments.monitoring_actions.boost_button')

            %a{class: button_classes, href: simulation_manager_experiment_path}
              %i.fi-download
              = t('experiments.monitoring_actions.get_sm_button')

- content_for :javascript do
  :javascript
    function capitaliseFirstLetter(string)
    {
        return string.charAt(0).toUpperCase() + string.slice(1);
    }

    $(function() {
      $.getJSON("/simulation_managers", function(data) {
        $("#actions-loading-workers").hide();
        var array_of_workers = data.sm_records;
        var map = {"created": 0,
                   "initializing": 0,
                   "running": 0,
                   "terminating": 0,
                   "error": 0};
        array_of_workers.map(function(worker) {
          var property = worker.state;
          if(worker.experiment_id === '#{@experiment.id}' && worker.user_id === '#{@experiment.user_id}') {
            if(map.hasOwnProperty(property)) {
              map[property]++;
            }
            else {
              map[property] = 1;
            }
          }
        })
        for(var key in map) {
          ($("<span>").addClass("w-"+key).text(capitaliseFirstLetter(key)+":").append("<br>")).appendTo($("#state"));
          ($("<span>").text(map[key]).append("<br>")).appendTo($("#value"));
        }
      })
    });