%section.panel.radius.list.plot
  - chart_container_id = "basic_chart_container_#{experiment.id}_#{moe_name}_#{resolution}"

  %h3.subheader
    = t('charts.histogram.header', moe: moe_name)
    = image_tag 'loading.gif', size: '16x16', style: 'display: none', id: "busy_basic_#{experiment.id}_#{moe_name}_#{resolution}"
  .row
    %span.button= t('charts.hide_button')
    %input{type: "checkbox", checked: "", style: "margin-left: 20px; margin-right: 3px;"}= t('charts.histogram.toggle_x_labels')
    -# TODO handle the refresh option
    -#= button_to_function 'Refresh',
    -#    "refresh_chart('#{experiment.id}', '#{moe_name}', #{resolution}, '#{experiments_update_basic_statistics_chart_path}')", class: 'nice_button'

  .basic_chart_container{ id: chart_container_id }

  = render partial: 'statistics_box', locals: { stats: stats, experiment: experiment, moe_name: moe_name }

  :javascript
    $(function() {
      var visible = "#{resolution}"<"#{@visible_threshold_resolution}";
      $("input[type=checkbox]").attr("checked", visible);
      $('input[type=checkbox]').on('click', function() {

        var chart = $("#basic_chart_container_#{experiment.id}_#{moe_name}_#{resolution}").highcharts();
        visible = !visible;
        chart.xAxis[0].update({labels: {enabled: visible}});
      })
      $('.plot .button').on('click', function() {
        $(this).parent().parent().remove()
      });
    });